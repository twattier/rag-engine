# Story 3.10: Implement Graph Metadata and Entity Type Filtering

**Epic:** Epic 3 - Graph-Based Retrieval, Knowledge Graph Construction & Visualization
**Story ID:** 3.10
**Status:** Draft
**Estimated Effort:** 1 story point (2-3 hours)

---

## User Story

**As a** knowledge graph explorer,
**I want** to filter the graph visualization by metadata fields and entity types,
**so that** I can focus on specific subsets of knowledge.

---

## Acceptance Criteria

1. LightRAG Server UI supports filtering (if built-in capability exists) or documentation provides Cypher queries for filtering
2. Filtering capabilities documented for:
   - Show only documents with specific metadata (e.g., department=engineering)
   - Show only entities of specific types (e.g., only "Person" and "Organization")
   - Show documents within date range
   - Combine multiple filters (AND/OR logic)
3. Filtered views dynamically update graph visualization
4. Documentation includes example filter configurations with expected results
5. API endpoint `GET /api/v1/graph/query` provides programmatic filtered graph queries (returns nodes/edges as JSON)
6. Integration test verifies filtered graph queries return correct subset of entities/relationships

---

## Tasks / Subtasks

- [ ] **Task 1: Implement graph query API endpoint** (AC: 5)
  - [ ] Create `GET /api/v1/graph/query` endpoint
  - [ ] Accept parameters: entity_types, metadata_filters, date_range
  - [ ] Return nodes and edges as JSON

- [ ] **Task 2: Document filtering workflows** (AC: 1, 2, 4)
  - [ ] Create `docs/graph-filtering.md`
  - [ ] Document filtering capabilities
  - [ ] Add example Cypher queries for filtering

- [ ] **Task 3: Integration tests** (AC: 6)
  - [ ] Test: Filter by entity type, verify only matching entities returned
  - [ ] Test: Filter by metadata, verify correct subset

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-17 | 1.0 | Story created from Epic 3 | Sarah (PO Agent) |
